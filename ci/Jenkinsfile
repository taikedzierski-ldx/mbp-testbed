PROJECT_REPO='https://github.com/taikedzierski-ldx/mbp-testbed'

library identifier: "commonlib@${BRANCH_NAME}",
    retriever: modernSCM([
      $class: 'GitSCMSource',
      remote: PROJECT_REPO
])

pipeline {
    agent { label "_runner:linux" }

    stages {
        stage("Overall") {
            agent { label "_runner:linux" }

            stages {
                stage("Parallelised") {
                    parallel {
                        stage("Run parallel 1") { steps {
                            run_tests name: "parallel_1", sequence: ["a", "b"], target: "_runner:linux"
                        }} // stage, step

                        stage("Run parallel 2") {
                            run_tests name: "parallel_2", sequence: ["c", "d"], target: "_runner:linux"
                        }} // stage, step
                    }
                } // stage Clone Repo
            } // inner stages
        } // stage OVerall
    } // stages
} // pipeline
